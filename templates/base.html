{% load static %}
<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}BlinkR Loan Dashboard{% endblock %}</title>
    
    <!-- Favicon - Multiple formats for better compatibility -->
    <link rel="icon" type="image/x-icon" href="{% static 'images/favicon.ico' %}">
    <link rel="shortcut icon" type="image/x-icon" href="{% static 'images/favicon.ico' %}">
    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'images/favicon.png' %}">
    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'images/favicon.png' %}">
    <!-- Fallback for root-level favicon request -->
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
        <script>
            tailwind.config = {
                darkMode: 'class',
                theme: {
                    extend: {
                        colors: {
                            // Dark mode colors (default)
                            'background': '#0a0e1a',
                            'foreground': '#f8fafc',
                            'card': '#1a1f2e',
                            'card-foreground': '#f8fafc',
                            'popover': '#1a1f2e',
                            'popover-foreground': '#f8fafc',
                            'primary': '#3b82f6',
                            'primary-foreground': '#ffffff',
                            'secondary': '#2d3748',
                            'secondary-foreground': '#f8fafc',
                            'muted': '#2d3748',
                            'muted-foreground': '#94a3b8',
                            'accent': '#4f46e5',
                            'accent-foreground': '#f8fafc',
                            'destructive': '#ef4444',
                            'destructive-foreground': '#f8fafc',
                            'border': '#374151',
                            'input': '#374151',
                            'ring': '#3b82f6',
                            'success': '#10b981',
                            'warning': '#f59e0b',
                            'info': '#06b6d4',
                            'chart-1': '#3b82f6',
                            'chart-2': '#10b981',
                            'chart-3': '#f59e0b',
                            'chart-4': '#ef4444',
                            'chart-5': '#8b5cf6',
                        },
                        borderRadius: {
                            'lg': '1rem',
                            'md': '0.75rem',
                            'sm': '0.5rem',
                        },
                        animation: {
                            'fade-in': 'fadeIn 0.5s ease-in-out',
                            'slide-up': 'slideUp 0.3s ease-out',
                            'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        },
                        keyframes: {
                            fadeIn: {
                                '0%': { opacity: '0' },
                                '100%': { opacity: '1' },
                            },
                            slideUp: {
                                '0%': { transform: 'translateY(10px)', opacity: '0' },
                                '100%': { transform: 'translateY(0)', opacity: '1' },
                            },
                        },
                    }
                }
            }
        </script>
        
        <style>
        body {
            background: #0f172a;
            min-height: 100vh;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            color: #f8fafc;
        }
            
        .card {
            background: #1e293b;
            border: 1px solid #334155;
            border-radius: 8px;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.3);
        }
            
        .kpi-card {
            background: #1e293b;
            border: 1px solid #334155;
            border-radius: 8px;
            padding: 24px;
            transition: box-shadow 0.2s ease;
        }
        
        .kpi-card:hover {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.4);
            border-color: #475569;
        }
            
            .btn-primary {
                background: #3b82f6;
                color: white;
                padding: 8px 16px;
                border-radius: 6px;
                border: none;
                font-weight: 500;
                cursor: pointer;
                transition: background-color 0.2s ease;
            }
            
            .btn-primary:hover {
                background: #2563eb;
            }
            
        .input-field {
            background: #374151;
            border: 1px solid #4b5563;
            color: #f9fafb;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 14px;
        }
        
        .input-field:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        /* Loading state for date inputs */
        .input-field.loading {
            border-color: #3b82f6;
            background-color: #1e40af20;
        }
        
        /* Smooth transitions for filter changes */
        .kpi-card, .chart-container {
            transition: opacity 0.2s ease;
        }
        
        .kpi-card.updating {
            opacity: 0.7;
        }
        
        .chart-container.updating {
            opacity: 0.7;
        }
        </style>
</head>
<body class="bg-background text-foreground min-h-screen">
    {% block content %}{% endblock %}
    
    <script>
        // Utility functions
        function formatCurrency(amount) {
            return new Intl.NumberFormat('en-IN', {
                style: 'currency',
                currency: 'INR',
                maximumFractionDigits: 0,
            }).format(amount);
        }
        
        function formatNumber(num) {
            return new Intl.NumberFormat('en-IN').format(num);
        }
        
        function formatPercentage(value) {
            return `${value.toFixed(1)}%`;
        }
        
        // Chart configuration
        Chart.defaults.color = '#94a3b8';
        Chart.defaults.borderColor = '#334155';
        Chart.defaults.backgroundColor = '#334155';
        
        // Register ChartDataLabels plugin if available
        if (typeof ChartDataLabels !== 'undefined') {
            Chart.register(ChartDataLabels);
        }
    </script>
</body>
</html>
